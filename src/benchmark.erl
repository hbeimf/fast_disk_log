-module(benchmark).
-compile(export_all).

-define(BID_REQ,
<<"{\"event\":\"request\",\"timestamp\":1431003677.988595,\"bid_request\":{\"id\":\"267e52a6-f4b9-11e4-8477-983ef703462d\",\"imp\":[{\"id\":\"1\",\"banner\":{\"w\":120,\"h\":600,\"pos\":0},\"ext\":{\"allowed_types\":[1],\"flight_ids\":{\"1\":[8456]},\"impression_responses\":[{\"id\":\"267e52a6-f4b9-11e4-8477-983ef703462d:1\",\"impid\":\"1\",\"price\":0.119882,\"ext\":{\"bidder_id\":1,\"seat_id\":1,\"dsp_id\":1,\"buyer_id\":87,\"advertiser_id\":886,\"flight_id\":8456,\"creative_id\":15492,\"tag_id\":15492}}],\"w\":[120,160],\"h\":[600,600],\"exchange_seat_ids\":[1,3],\"private\":false}}],\"site\":{\"domain\":\"orbitz.com\",\"page\":\"http://www.orbitz.com/shop/home\",\"ext\":{\"ag_rank\":5.95785718332317,\"doubleclick_verticals\":[67,179,1010,5000,5104,5140,5147,5177,5440],\"exchange_id\":4,\"exchange_seller_id\":0,\"ias_segments\":[402145,402146,402147,513,510,509,504,503,512,511,502,501,1851,516,517,518,1520,508,507,401,402,506,505],\"sitelist_ids\":[92,108,297,339,363,468,586,621,636,639]}},\"device\":{\"ua\":\"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:37.0) Gecko/20100101 Firefox/37.0,gzip(gfe)\",\"ip\":\"66.42.239.0\",\"geo\":{\"lat\":39.0006505,\"lon\":-84.64175,\"country\":\"US\",\"region\":\"KY\",\"zip\":\"41042\",\"type\":2,\"ext\":{\"normalized_city\":\"florence\"}},\"language\":\"en\",\"devicetype\":2,\"ext\":{\"timezone\":-240,\"device_type_id\":1,\"device_id\":0,\"operating_system_id\":11,\"operating_system_variant_id\":12,\"browser_id\":10,\"browser_variant_id\":0}},\"user\":{\"id\":\"CAESEDUAP2Ee7FTx7fw-hmfaypA\",\"buyeruid\":\"290e505c-9a0a-11e4-b9d6-afe3b23ffdf7\"},\"at\":1,\"tmax\":0,\"ext\":{\"forensiq_risk_score\":0,\"forensiq_seller_domain\":29,\"ssl\":0}},\"bid_response\":{\"id\":\"267e52a6-f4b9-11e4-8477-983ef703462d\",\"seatbid\":[{\"bid\":[{\"id\":\"267e52a6-f4b9-11e4-8477-983ef703462d:1\",\"impid\":\"1\",\"price\":0.119882,\"ext\":{\"bidder_id\":1,\"seat_id\":1,\"dsp_id\":1,\"buyer_id\":87,\"advertiser_id\":886,\"flight_id\":8456,\"creative_id\":15492,\"tag_id\":15492}}]}]},\"bid_active_bidder\":true,\"bid_active_datacenter\":true,\"bid_active_exchange\":true,\"hostname\":\"h033\",\"thinktime\":9}\n">>).

start() ->
    fast_disk_log:open(test, <<"test.log">>),
    [spawn(fun () -> [fast_disk_log:log(test, ?BID_REQ) || _ <- lists:seq(1, 10000)] end) || _ <- lists:seq(1, 1000)].

